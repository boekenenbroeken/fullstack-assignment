datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Driver {
  id          Int    @id @default(autoincrement())
  name        String @unique
  nationality String

  racesWon Race[] @relation("RaceWinners")

  championships Season[] @relation("SeasonChampions")
}

model Season {
  id         Int    @id @default(autoincrement())
  year       Int    @unique
  champion   Driver @relation("SeasonChampions", fields: [championId], references: [id])
  championId Int
  races      Race[]
}

model Race {
  id       Int      @id @default(autoincrement())
  name     String
  round    Int
  date     DateTime
  circuit  String
  season   Season   @relation(fields: [seasonId], references: [id])
  seasonId Int

  winner   Driver @relation("RaceWinners", fields: [winnerId], references: [id])
  winnerId Int
}
